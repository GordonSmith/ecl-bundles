<!DOCTYPE html>
<html>
<head>
    <title>HPCC:  Visualization</title>
    <link href="./index.css" rel="stylesheet">

    <script src="http://viz.hpccsystems.com/v1.14.0-rc10/dist-amd/hpcc-viz.js"></script>
    <!--
    <script src="http://viz.hpccsystems.com/v1.14.0-rc10/dist-amd/hpcc-viz.js"></script>
    -->
    <!--
    <script src="../Visualization/node_modules/requirejs/require.js"></script>
    <script src="../Visualization/src/loader.js"></script>
    -->
    <script src="./index.js"></script>
</head>
<body onresize="doResize();">
    <div id="placeholder">
    </div>
    <script>
        var app;
        var espUrl = window.location.href;
        switch (window.location.hostname) {
            //  Used for debugging JS
            case "localhost":
                espUrl = "http://192.168.3.22:8010/WsWorkunits/res/W20160828-093832/res/index.html";
                doRender(require);
                break;
            default:
                hpccsystems.redirect.github("DERM_WIDGET", "GOrdonSmith", function (require) {
                    doRender(require);
                });
                break;
        }

        function doRender(requireContext) {
            requireApp(requireContext, function(App) {
                app = new App()
                    .target("placeholder")
                    .espUrl(espUrl)
                    .render()
                ;
            });
        }

        function doResize() {
            if (app) {
                app
                    .resize()
                    .lazyRender()
                ;
            }
        };

    </script>
</body>
</html>
